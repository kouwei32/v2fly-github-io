(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{290:function(e,t,a){"use strict";a.r(t);var o=a(0),r=Object(o.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"websocket"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#websocket"}},[e._v("#")]),e._v(" WebSocket")]),e._v(" "),a("p",[e._v("Use standard WebSocket as the transport. WebSocket connections can be load-balanced by other HTTP servers (such as Nginx), or a VLESS Fallbacks "),a("code",[e._v("path")]),e._v(".")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("WebSocket will recognize the X-Forwarded-For header of the HTTP request to override the source address of the incoming traffic, with a higher priority than specified by any PROXY protocol data.")])]),e._v(" "),a("h2",{attrs:{id:"websocketobject"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#websocketobject"}},[e._v("#")]),e._v(" WebSocketObject")]),e._v(" "),a("p",[a("code",[e._v("WebSocketObject")]),e._v(" corresponds to the "),a("code",[e._v("wsSettings")]),e._v(" item in the transfer configuration.")]),e._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"acceptProxyProtocol"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"path"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"headers"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"Host"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"v2ray.com"')]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"maxEarlyData"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1024")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"useBrowserForwarding"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"earlyDataHeaderName"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('""')]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("blockquote",[a("p",[a("code",[e._v("acceptProxyProtocol")]),e._v(": true | false")])]),e._v(" "),a("p",[e._v("(Since v4.27.1) For inbounds only, whether to use PROXY connections. Default value is "),a("code",[e._v("false")]),e._v(". When set to "),a("code",[e._v("true")]),e._v(", after establishing the TCP connection, the client must follow up with PROXY protocol v1 or v2; otherwise the connection will be immediately closed.")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://www.haproxy.org/download/2.2/doc/proxy-protocol.txt",target:"_blank",rel:"noopener noreferrer"}},[e._v("PROXY protocol"),a("OutboundLink")],1),e._v(" is used for transmitting the true origin IP and port of requests for routing purposes. "),a("strong",[e._v("This is for advanced usage only; please ignore it if you do not understand.")]),e._v(". Most common proxy software (such as HAProxy, Nginx) can be configured to utilize PROXY, and VLESS Fallbacks "),a("code",[e._v("xver")]),e._v(" can also utilize it.")]),e._v(" "),a("blockquote",[a("p",[a("code",[e._v("path")]),e._v(" string")])]),e._v(" "),a("p",[e._v("The HTTP path used by WebSocket. The default value is "),a("code",[e._v('"/"')]),e._v(".")]),e._v(" "),a("blockquote",[a("p",[a("code",[e._v("headers")]),e._v(": map {string: string}")])]),e._v(" "),a("p",[e._v("Custom HTTP headers. A key-value pair where each key represents the name of an HTTP header, and the corresponding value is a string. Optional.")]),e._v(" "),a("blockquote",[a("p",[a("code",[e._v("maxEarlyData")]),e._v(": number")])]),e._v(" "),a("p",[e._v("(Since v4.37.0) The maximum length of the data to be sent in advance, used to reduce the time to establish a connection.")]),e._v(" "),a("p",[e._v("The data will be appended in a Base64 RawURLEncoding format after the "),a("code",[e._v("path")]),e._v(". Forwarding needs to be done according to the prefix.")]),e._v(" "),a("p",[e._v("For the receiving party, setting any non-0 value indicates that early data is supported.")]),e._v(" "),a("p",[e._v("(Since v4.39.0) If "),a("code",[e._v("earlyDataHeaderName")]),e._v(" is set, the early data will be placed in the specified HTTP header.")]),e._v(" "),a("blockquote",[a("p",[a("code",[e._v("useBrowserForwarding")]),e._v(": true | false")])]),e._v(" "),a("p",[e._v("(Since v4.37.0) Whether to enable browser forwarding. If browser forwarding is enabled, the corresponding WebSockets connection will be forwarded through the browser forwarding module and then sent to its destination.")]),e._v(" "),a("p",[e._v("The server will automatically adapt to the browser forwarding function of the client; no additional configuration is required.")]),e._v(" "),a("p",[e._v("Only compatible with early data ("),a("code",[e._v("maxEarlyData")]),e._v(") based on "),a("code",[e._v("path")]),e._v(' or a HTTP header named "Sec-WebSocket-Protocol".')]),e._v(" "),a("p",[e._v("See also "),a("RouterLink",{attrs:{to:"/en_US/config/browserforwarder.html"}},[e._v("BrowserForwarderObject")]),e._v(".")],1),e._v(" "),a("blockquote",[a("p",[a("code",[e._v("earlyDataHeaderName")]),e._v(" :  string")])]),e._v(" "),a("p",[e._v("(Since v4.39.0) The HTTP header to use for early data. Set to enable early data in the HTTP header. If it is left blank, early data based on "),a("code",[e._v("path")]),e._v(" will be used.")]),e._v(" "),a("p",[e._v("The browser forwarding function can be enabled only when the name of the HTTP header is "),a("code",[e._v('"Sec-WebSocket-Protocol"')]),e._v(".")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("The implementation of V2Ray's WebSocket Early Data is compatible with other projects which implement it, and can be connected to other WebSocket servers after being correctly configured.")]),e._v(" "),a("p",[e._v("The clients of other projects may not be able to connect to the V2Ray WebSocket server.")])])])}),[],!1,null,null,null);t.default=r.exports}}]);