import{_ as c,r as a,o as i,c as p,a as o,b as n,w as d,e as t,d as e}from"./app.31d0518d.js";const l={},u=t(`<h1 id="websocket" tabindex="-1"><a class="header-anchor" href="#websocket" aria-hidden="true">#</a> WebSocket</h1><p>Use standard WebSocket as the transport. WebSocket connections can be load-balanced by other HTTP servers (such as Nginx), or a VLESS Fallbacks <code>path</code>.</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>WebSocket will recognize the X-Forwarded-For header of the HTTP request to override the source address of the incoming traffic, with a higher priority than specified by any PROXY protocol data.</p></div><h2 id="websocketobject" tabindex="-1"><a class="header-anchor" href="#websocketobject" aria-hidden="true">#</a> WebSocketObject</h2><p><code>WebSocketObject</code> corresponds to the <code>wsSettings</code> item in the transfer configuration.</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;acceptProxyProtocol&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;headers&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;Host&quot;</span><span class="token operator">:</span> <span class="token string">&quot;v2ray.com&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;maxEarlyData&quot;</span><span class="token operator">:</span> <span class="token number">1024</span><span class="token punctuation">,</span>
    <span class="token property">&quot;useBrowserForwarding&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;earlyDataHeaderName&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><code>acceptProxyProtocol</code>: true | false</p></blockquote><p>(Since v4.27.1) For inbounds only, whether to use PROXY connections. Default value is <code>false</code>. When set to <code>true</code>, after establishing the TCP connection, the client must follow up with PROXY protocol v1 or v2; otherwise the connection will be immediately closed.</p>`,8),h={href:"https://www.haproxy.org/download/2.2/doc/proxy-protocol.txt",target:"_blank",rel:"noopener noreferrer"},b=e("PROXY protocol"),k=e(" is used for transmitting the true origin IP and port of requests for routing purposes. "),f=o("strong",null,"This is for advanced usage only; please ignore it if you do not understand.",-1),m=e(". Most common proxy software (such as HAProxy, Nginx) can be configured to utilize PROXY, and VLESS Fallbacks "),v=o("code",null,"xver",-1),w=e(" can also utilize it."),g=t("<blockquote><p><code>path</code> string</p></blockquote><p>The HTTP path used by WebSocket. The default value is <code>&quot;/&quot;</code>.</p><blockquote><p><code>headers</code>: map {string: string}</p></blockquote><p>Custom HTTP headers. A key-value pair where each key represents the name of an HTTP header, and the corresponding value is a string. Optional.</p><blockquote><p><code>maxEarlyData</code>: number</p></blockquote><p>(Since v4.37.0) The maximum length of the data to be sent in advance, used to reduce the time to establish a connection.</p><p>The data will be appended in a Base64 RawURLEncoding format after the <code>path</code>. Forwarding needs to be done according to the prefix.</p><p>For the receiving party, setting any non-0 value indicates that early data is supported.</p><p>(Since v4.39.0) If <code>earlyDataHeaderName</code> is set, the early data will be placed in the specified HTTP header.</p><blockquote><p><code>useBrowserForwarding</code>: true | false</p></blockquote><p>(Since v4.37.0) Whether to enable browser forwarding. If browser forwarding is enabled, the corresponding WebSockets connection will be forwarded through the browser forwarding module and then sent to its destination.</p><p>The server will automatically adapt to the browser forwarding function of the client; no additional configuration is required.</p><p>Only compatible with early data (<code>maxEarlyData</code>) based on <code>path</code> or a HTTP header named &quot;Sec-WebSocket-Protocol&quot;.</p>",13),y=e("See also "),_=e("BrowserForwarderObject"),q=e("."),T=t('<blockquote><p><code>earlyDataHeaderName</code> : string</p></blockquote><p>(Since v4.39.0) The HTTP header to use for early data. Set to enable early data in the HTTP header. If it is left blank, early data based on <code>path</code> will be used.</p><p>The browser forwarding function can be enabled only when the name of the HTTP header is <code>&quot;Sec-WebSocket-Protocol&quot;</code>.</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>The implementation of V2Ray&#39;s WebSocket Early Data is compatible with other projects which implement it, and can be connected to other WebSocket servers after being correctly configured.</p><p>The clients of other projects may not be able to connect to the V2Ray WebSocket server.</p></div>',4);function S(P,x){const s=a("ExternalLinkIcon"),r=a("RouterLink");return i(),p("div",null,[u,o("p",null,[o("a",h,[b,n(s)]),k,f,m,v,w]),g,o("p",null,[y,n(r,{to:"/en_US/config/browserforwarder.html"},{default:d(()=>[_]),_:1}),q]),T])}const W=c(l,[["render",S],["__file","websocket.html.vue"]]);export{W as default};
