<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DNS | V2Fly.org</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="apple-touch-icon" size="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" size="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" size="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" color="#5bbad5" href="/safari-pinned-tab.svg">
    <meta name="description" content="Project V is a collection of tools that can help you build your own basic communication network">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta name="apple-mobile-web-app-title" content="Project V">
    <meta name="application-name" content="Project V">
    <meta name="msapplication-TileColor" content="#da532c">
    
    <link rel="preload" href="/assets/css/0.styles.d72e43c9.css" as="style"><link rel="preload" href="/assets/js/app.88b09124.js" as="script"><link rel="preload" href="/assets/js/3.21417aa6.js" as="script"><link rel="preload" href="/assets/js/6.86334a57.js" as="script"><link rel="preload" href="/assets/js/86.feb51964.js" as="script"><link rel="prefetch" href="/assets/js/10.c245746a.js"><link rel="prefetch" href="/assets/js/100.d1fbeebd.js"><link rel="prefetch" href="/assets/js/101.b6218476.js"><link rel="prefetch" href="/assets/js/102.efef1981.js"><link rel="prefetch" href="/assets/js/103.720e60ae.js"><link rel="prefetch" href="/assets/js/104.37d26b43.js"><link rel="prefetch" href="/assets/js/105.06584deb.js"><link rel="prefetch" href="/assets/js/106.22b10e3e.js"><link rel="prefetch" href="/assets/js/107.75e695d8.js"><link rel="prefetch" href="/assets/js/108.b4375a13.js"><link rel="prefetch" href="/assets/js/109.450370f9.js"><link rel="prefetch" href="/assets/js/11.d5945671.js"><link rel="prefetch" href="/assets/js/110.52b6fc46.js"><link rel="prefetch" href="/assets/js/111.3ecee5e7.js"><link rel="prefetch" href="/assets/js/112.6954c519.js"><link rel="prefetch" href="/assets/js/113.ee3310f6.js"><link rel="prefetch" href="/assets/js/114.2436cea2.js"><link rel="prefetch" href="/assets/js/115.12762f94.js"><link rel="prefetch" href="/assets/js/116.94d8e3c0.js"><link rel="prefetch" href="/assets/js/117.6a669045.js"><link rel="prefetch" href="/assets/js/118.e2f52a24.js"><link rel="prefetch" href="/assets/js/119.3b411862.js"><link rel="prefetch" href="/assets/js/12.a73ff16b.js"><link rel="prefetch" href="/assets/js/120.b0682ebd.js"><link rel="prefetch" href="/assets/js/121.1025dcc3.js"><link rel="prefetch" href="/assets/js/122.6ccec32e.js"><link rel="prefetch" href="/assets/js/123.a3677a05.js"><link rel="prefetch" href="/assets/js/124.5bf3761d.js"><link rel="prefetch" href="/assets/js/125.6efc8140.js"><link rel="prefetch" href="/assets/js/126.cd1422fa.js"><link rel="prefetch" href="/assets/js/127.708e5618.js"><link rel="prefetch" href="/assets/js/128.d932dd3e.js"><link rel="prefetch" href="/assets/js/129.18f2c10f.js"><link rel="prefetch" href="/assets/js/13.a5398ce2.js"><link rel="prefetch" href="/assets/js/130.9bfcbf1e.js"><link rel="prefetch" href="/assets/js/131.e6c6ae73.js"><link rel="prefetch" href="/assets/js/132.f5276664.js"><link rel="prefetch" href="/assets/js/133.d9f32624.js"><link rel="prefetch" href="/assets/js/134.d1bad41a.js"><link rel="prefetch" href="/assets/js/135.19cbbb8d.js"><link rel="prefetch" href="/assets/js/136.3ec29392.js"><link rel="prefetch" href="/assets/js/137.aa1c7868.js"><link rel="prefetch" href="/assets/js/138.a8a5b9ca.js"><link rel="prefetch" href="/assets/js/139.a422b01d.js"><link rel="prefetch" href="/assets/js/14.56741a34.js"><link rel="prefetch" href="/assets/js/140.b23d5660.js"><link rel="prefetch" href="/assets/js/141.54ad199d.js"><link rel="prefetch" href="/assets/js/142.8f339591.js"><link rel="prefetch" href="/assets/js/143.a8de5b27.js"><link rel="prefetch" href="/assets/js/144.60a1cf62.js"><link rel="prefetch" href="/assets/js/145.1a1f38ef.js"><link rel="prefetch" href="/assets/js/146.186ec8fe.js"><link rel="prefetch" href="/assets/js/147.09094f8f.js"><link rel="prefetch" href="/assets/js/148.711529ac.js"><link rel="prefetch" href="/assets/js/149.cda0f794.js"><link rel="prefetch" href="/assets/js/15.f3f9023a.js"><link rel="prefetch" href="/assets/js/150.db410be6.js"><link rel="prefetch" href="/assets/js/151.b878ea38.js"><link rel="prefetch" href="/assets/js/152.827a59d5.js"><link rel="prefetch" href="/assets/js/16.4b84dd8b.js"><link rel="prefetch" href="/assets/js/17.4f499a1b.js"><link rel="prefetch" href="/assets/js/18.e562efea.js"><link rel="prefetch" href="/assets/js/19.306be50e.js"><link rel="prefetch" href="/assets/js/20.acd9aae4.js"><link rel="prefetch" href="/assets/js/21.d69813d7.js"><link rel="prefetch" href="/assets/js/22.00632b2a.js"><link rel="prefetch" href="/assets/js/23.dec43b71.js"><link rel="prefetch" href="/assets/js/24.01a5da5b.js"><link rel="prefetch" href="/assets/js/25.99c8b32b.js"><link rel="prefetch" href="/assets/js/26.60d231d2.js"><link rel="prefetch" href="/assets/js/27.be97cda3.js"><link rel="prefetch" href="/assets/js/28.87a56723.js"><link rel="prefetch" href="/assets/js/29.7de98d2c.js"><link rel="prefetch" href="/assets/js/30.67ed537c.js"><link rel="prefetch" href="/assets/js/31.b138684e.js"><link rel="prefetch" href="/assets/js/32.c16f2498.js"><link rel="prefetch" href="/assets/js/33.5ddf7ea4.js"><link rel="prefetch" href="/assets/js/34.89843167.js"><link rel="prefetch" href="/assets/js/35.6f89e906.js"><link rel="prefetch" href="/assets/js/36.46aba1da.js"><link rel="prefetch" href="/assets/js/37.523292ea.js"><link rel="prefetch" href="/assets/js/38.f77d4d36.js"><link rel="prefetch" href="/assets/js/39.a71671de.js"><link rel="prefetch" href="/assets/js/4.aba52a62.js"><link rel="prefetch" href="/assets/js/40.1028c09a.js"><link rel="prefetch" href="/assets/js/41.2f84d1d5.js"><link rel="prefetch" href="/assets/js/42.09c81d6a.js"><link rel="prefetch" href="/assets/js/43.7a276e04.js"><link rel="prefetch" href="/assets/js/44.70b60578.js"><link rel="prefetch" href="/assets/js/45.0cadaa57.js"><link rel="prefetch" href="/assets/js/46.8e109daf.js"><link rel="prefetch" href="/assets/js/47.40f9b220.js"><link rel="prefetch" href="/assets/js/48.bd27cf1c.js"><link rel="prefetch" href="/assets/js/49.3bc6bb6b.js"><link rel="prefetch" href="/assets/js/5.d1f468ef.js"><link rel="prefetch" href="/assets/js/50.4d4a37be.js"><link rel="prefetch" href="/assets/js/51.725ce8fa.js"><link rel="prefetch" href="/assets/js/52.5f7bf18d.js"><link rel="prefetch" href="/assets/js/53.ce1ea547.js"><link rel="prefetch" href="/assets/js/54.f0e44880.js"><link rel="prefetch" href="/assets/js/55.5da6a71e.js"><link rel="prefetch" href="/assets/js/56.e7d5cf5c.js"><link rel="prefetch" href="/assets/js/57.bf5aa05e.js"><link rel="prefetch" href="/assets/js/58.325d364a.js"><link rel="prefetch" href="/assets/js/59.7dd25d4e.js"><link rel="prefetch" href="/assets/js/60.f2e4d840.js"><link rel="prefetch" href="/assets/js/61.f86c429d.js"><link rel="prefetch" href="/assets/js/62.777e660c.js"><link rel="prefetch" href="/assets/js/63.0243ed21.js"><link rel="prefetch" href="/assets/js/64.f145ad89.js"><link rel="prefetch" href="/assets/js/65.587521a8.js"><link rel="prefetch" href="/assets/js/66.8162b874.js"><link rel="prefetch" href="/assets/js/67.f93c0686.js"><link rel="prefetch" href="/assets/js/68.0bd5150e.js"><link rel="prefetch" href="/assets/js/69.addbbab3.js"><link rel="prefetch" href="/assets/js/7.442c5769.js"><link rel="prefetch" href="/assets/js/70.3f195afa.js"><link rel="prefetch" href="/assets/js/71.e81da483.js"><link rel="prefetch" href="/assets/js/72.a351eb9d.js"><link rel="prefetch" href="/assets/js/73.3c1b9838.js"><link rel="prefetch" href="/assets/js/74.1bdedac4.js"><link rel="prefetch" href="/assets/js/75.cddb6497.js"><link rel="prefetch" href="/assets/js/76.7cafae4d.js"><link rel="prefetch" href="/assets/js/77.29dd33e6.js"><link rel="prefetch" href="/assets/js/78.e0131526.js"><link rel="prefetch" href="/assets/js/79.ba496ef2.js"><link rel="prefetch" href="/assets/js/8.8f12d198.js"><link rel="prefetch" href="/assets/js/80.ef24720a.js"><link rel="prefetch" href="/assets/js/81.f4aa22ec.js"><link rel="prefetch" href="/assets/js/82.e1473104.js"><link rel="prefetch" href="/assets/js/83.b853ae0e.js"><link rel="prefetch" href="/assets/js/84.1accaa38.js"><link rel="prefetch" href="/assets/js/85.2de438ff.js"><link rel="prefetch" href="/assets/js/87.974bbb17.js"><link rel="prefetch" href="/assets/js/88.4be8ffb5.js"><link rel="prefetch" href="/assets/js/89.944f4b16.js"><link rel="prefetch" href="/assets/js/9.625e2be0.js"><link rel="prefetch" href="/assets/js/90.4419fad4.js"><link rel="prefetch" href="/assets/js/91.e39d3a4d.js"><link rel="prefetch" href="/assets/js/92.1caa6052.js"><link rel="prefetch" href="/assets/js/93.22f673de.js"><link rel="prefetch" href="/assets/js/94.c54cf259.js"><link rel="prefetch" href="/assets/js/95.d102ff18.js"><link rel="prefetch" href="/assets/js/96.edbabfe0.js"><link rel="prefetch" href="/assets/js/97.322a2065.js"><link rel="prefetch" href="/assets/js/98.24cd8fad.js"><link rel="prefetch" href="/assets/js/99.62bd8de7.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.fd6baf40.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d72e43c9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/en_US/" class="home-link router-link-active"><img src="/v2ray.png" alt="V2Fly.org" class="logo"> <span class="site-name can-hide">V2Fly.org</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/en_US/guide/start.html" class="nav-link">
  Quick Start
</a></div><div class="nav-item"><a href="/en_US/config/overview.html" class="nav-link">
  Config Reference
</a></div><div class="nav-item"><a href="/en_US/awesome/tools.html" class="nav-link">
  Tools
</a></div><div class="nav-item"><a href="/en_US/developer/intro/compile.html" class="nav-link">
  Developer Guide
</a></div><div class="nav-item"><a href="https://guide.v2fly.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  New concise guide
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="选择语言" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="选择语言" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/v5/config/dns.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/en_US/v5/config/dns.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <a href="https://github.com/v2fly" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/en_US/guide/start.html" class="nav-link">
  Quick Start
</a></div><div class="nav-item"><a href="/en_US/config/overview.html" class="nav-link">
  Config Reference
</a></div><div class="nav-item"><a href="/en_US/awesome/tools.html" class="nav-link">
  Tools
</a></div><div class="nav-item"><a href="/en_US/developer/intro/compile.html" class="nav-link">
  Developer Guide
</a></div><div class="nav-item"><a href="https://guide.v2fly.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  New concise guide
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="选择语言" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="选择语言" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/v5/config/dns.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/en_US/v5/config/dns.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <a href="https://github.com/v2fly" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Config Reference</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en_US/v5/config/overview.html" class="sidebar-link">Configuration File Format (Draft)</a></li><li><a href="/en_US/v5/config/inbound.html" class="sidebar-link">Inbounds</a></li><li><a href="/en_US/v5/config/outbound.html" class="sidebar-link">Outbounds</a></li><li><a href="/en_US/v5/config/proxy.html" class="sidebar-link">Proxy Protocol</a></li><li><a href="/en_US/v5/config/stream.html" class="sidebar-link">Stream</a></li><li><a href="/en_US/v5/config/service.html" class="sidebar-link">Service</a></li><li><a href="/en_US/v5/config/dns.html" aria-current="page" class="active sidebar-link">DNS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en_US/v5/config/dns.html#dns-processing-flow" class="sidebar-link">DNS processing flow</a></li><li class="sidebar-sub-header"><a href="/en_US/v5/config/dns.html#nameserverobject" class="sidebar-link">NameServerObject</a></li><li class="sidebar-sub-header"><a href="/en_US/v5/config/dns.html#statichostsobject" class="sidebar-link">StaticHostsObject</a></li></ul></li><li><a href="/en_US/v5/config/router.html" class="sidebar-link">Router</a></li><li><a href="/en_US/v5/config/geo.html" class="sidebar-link">Geo</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Proxy Protocol</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en_US/v5/config/proxy/socks.html" class="sidebar-link">Socks</a></li><li><a href="/en_US/v5/config/proxy/vmess.html" class="sidebar-link">VMess</a></li><li><a href="/en_US/v5/config/proxy/vlite.html" class="sidebar-link">VLite</a></li><li><a href="/en_US/v5/config/proxy/shadowsocks.html" class="sidebar-link">Shadowsocks</a></li><li><a href="/en_US/v5/config/proxy/http.html" class="sidebar-link">HTTP</a></li><li><a href="/en_US/v5/config/proxy/dokodemo.html" class="sidebar-link">Dokodemo</a></li><li><a href="/en_US/v5/config/proxy/freedom.html" class="sidebar-link">Freedom</a></li><li><a href="/en_US/v5/config/proxy/loopback.html" class="sidebar-link">Loopback</a></li><li><a href="/en_US/v5/config/proxy/blackhole.html" class="sidebar-link">Blackhole</a></li><li><a href="/en_US/v5/config/proxy/dns.html" class="sidebar-link">DNS</a></li><li><a href="/en_US/v5/config/proxy/trojan.html" class="sidebar-link">Trojan</a></li><li><a href="/en_US/v5/config/proxy/vless.html" class="sidebar-link">VLESS</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Stream Transport Protocol</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en_US/v5/config/stream/tcp.html" class="sidebar-link">TCP</a></li><li><a href="/en_US/v5/config/stream/websocket.html" class="sidebar-link">WebSocket</a></li><li><a href="/en_US/v5/config/stream/kcp.html" class="sidebar-link">KCP(mKCP)</a></li><li><a href="/en_US/v5/config/stream/quic.html" class="sidebar-link">QUIC</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Service</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en_US/v5/config/service/stats.html" class="sidebar-link">Stats</a></li><li><a href="/en_US/v5/config/service/policy.html" class="sidebar-link">Policy</a></li><li><a href="/en_US/v5/config/service/browser.html" class="sidebar-link">Browser Forwarder</a></li><li><a href="/en_US/v5/config/service/burstObservatory.html" class="sidebar-link">Burst Observatory</a></li><li><a href="/en_US/v5/config/service/backgroundObservatory.html" class="sidebar-link">Background Observatory</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="dns"><a href="#dns" class="header-anchor">#</a> DNS</h1> <p>service.dns</p> <p>V2Ray has a built-in DNS server, which has two main purposes: matching routing rules according to the IP resolved from a domain, and traditional DNS function—resolving the target address to connect.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Due to the complexity of DNS protocol, V2Ray only supports basic IP query function (A and AAAA records). In order to have a complete DNS experience, you may want to use an dedicated DNS serverware, such as <a href="https://coredns.io" target="_blank" rel="noopener noreferrer">CoreDNS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, together with V2Ray's builtin DNS features.</p></div> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>For <code>outbound</code>s with <code>freedom</code> protocol, the default value of <code>domainStrategy</code> is <code>AsIs</code>, therefore the DNS settings will not be applied to this outbound by default. If necessary, it should be configured as<code>UseIP</code>.</p></div> <h2 id="dns-processing-flow"><a href="#dns-processing-flow" class="header-anchor">#</a> DNS processing flow</h2> <p>When a domain name list assigned by a DNS server matches the domain name currently being queried, V2Ray will use this DNS server first, otherwise, it will query from top to bottom, and only return the IP list which matches expectIPs. The processing flow diagram of the DNS server is as follows:</p> <p><img src="/dns_flowchart_en.png" alt=""></p> <blockquote><p><code>nameServer</code>: [ <a href="#NameServerObject">NameServerObject</a> ]</p></blockquote> <p>A list of name servers.</p> <blockquote><p><code>staticHosts</code>: [ <a href="#StaticHostsObject">StaticHostsObject</a> ]</p></blockquote> <p>Host Mapping rules. This can be used to manually define DNS resolution results or transform DNS resolutions.</p> <blockquote><p><code>tag</code>: string</p></blockquote> <p>The inbound tag for traffic initiated by the dns module.</p> <blockquote><p><code>disableCache</code>: true|false</p></blockquote> <p>Disable built in caching for DNS. Otherwise the DNS result will be cached for 10 mins.</p> <blockquote><p><code>queryStrategy</code>: <code>USE_IP</code> | <code>USE_IP4</code> | <code>USE_IP6</code></p></blockquote> <p>The type of network address requested by dns.</p> <blockquote><p><code>disableFallback</code>: true|false</p></blockquote> <p>Disable the fallback query step.</p> <blockquote><p><code>disableFallbackIfMatch</code>: bool</p></blockquote> <p>Disable the fallback query step if there is a server with prioritizedDomain matches.</p> <h2 id="nameserverobject"><a href="#nameserverobject" class="header-anchor">#</a> NameServerObject</h2> <blockquote><p><code>address</code>: string</p></blockquote> <p>The network address or URL of Domain Name Service Service Server.</p> <p>Following Types are supported:</p> <ul><li>Standard DNS: An address like <code>1.0.0.1:53</code> specifies an UDP DNS Server. This the most common type of DNS Server.</li> <li>DNS over TCP: An address like <code>tcp://host:port</code> specifies an TCP DNS Server. Currently DNS over TCP in V2Ray have performance implications.</li> <li>DNS over Local TCP: An address like <code>tcp+local://host:port</code> specifies a TCP DNS Server send over local network. The communication with remote DNS server will be send from client's network environment directly without dispatch over routing component.</li> <li>DNS over HTTPS: An address like <code>https://host:port/dns-query</code> specifies an DNS over HTTPS Server.</li> <li>DNS over Local HTTPS: An address like <code>https+local://host:port/dns-query</code> specifies an DNS over HTTPS Server over local network. The communication with remote DNS server will be send from client's network environment directly without dispatch over routing component.</li> <li>DNS over Local QUIC: An address like <code>quic+local://host:port/</code> specifies an DNS over QUIC Server over local network. The communication with remote DNS server will be send from client's network environment directly without dispatch over routing component.</li></ul> <blockquote><p><code>clientIp</code>: string</p></blockquote> <p>The client IP address indication send to the DNS Server. The server may return a localised result based on this address.</p> <blockquote><p><code>skipFallback</code>: true | false</p></blockquote> <p>Prevent fallback to this DNS Server.</p> <blockquote><p><code>prioritizedDomain</code>: [ <a href="#PrioritizedDomainObject">PrioritizedDomainObject</a> ]</p></blockquote> <p>The domains that should be send to this server. If the domain being queried match one of the specification, then the query will be send to this server first.</p> <blockquote><p><code>geoip</code>: [ <a href="/en_US/v5/config/geo.html#GeoIPObject">GeoIPObject</a> ]</p></blockquote> <p>The IP address expected from this server. If the result is not from the given IP address range, it will be discarded.</p> <h2 id="statichostsobject"><a href="#statichostsobject" class="header-anchor">#</a> StaticHostsObject</h2> <blockquote><p><code>type</code>: <code>Full</code> | <code>Subdomain</code> | <code>Keyword</code> | <code>Regex</code></p></blockquote> <p>Static Hosts supports different types of matching method.</p> <ul><li>Full: Requires an exact match. When this domain name completely matches the target domain name, the rule takes effect. For example, &quot;v2ray.com&quot; matches &quot;v2ray.com&quot; but not &quot;www.v2ray.com&quot;.</li> <li>Subdomain: Matches a domain and all its subdomain. This rule takes effect when the domain name is the target domain name or its subdomain name. For example, &quot;v2ray.com&quot; matches &quot;www.v2ray.com&quot;, &quot;v2ray.com&quot;, but not &quot;xv2ray.com&quot;.</li> <li>Keyword: Matches any domain with a keyword. When this string matches any part of the target domain name, the rule takes effect. For example, &quot;sina.com&quot; can match &quot;sina.com&quot;, &quot;sina.com.cn&quot; and &quot;www.sina.com&quot; but not &quot;sina.cn&quot;.</li> <li>Regex: Matches domain based on Regular Expression. When this regular expression matches the target domain name, the rule takes effect. For example, &quot;\\.goo.*\\.com$&quot; matches &quot;www.google.com&quot; and &quot;fonts.googleapis.com&quot; but not &quot;google.com&quot;.</li></ul> <blockquote><p><code>domain</code>: string</p></blockquote> <p>The domain matching specification. Its interpretation is based on the <code>type</code> of the rule.</p> <blockquote><p><code>ip</code>: string</p></blockquote> <p>The static host IP address. If configured, this IP address will be used as the domain name resolution result for matching domains.</p> <blockquote><p><code>proxiedDomain</code>: string</p></blockquote> <p>The replacement domain. If configured, this domain name's resolution result will be used as the domain name resolution result for mathcing domains.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/v2fly/v2fly-github-io/edit/master/docs/en_US/v5/config/dns.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">10/1/2021, 11:16:08 AM</span></div></footer> <div class="contributors" style="display:none;" data-v-6000aab7><span data-v-6000aab7>Contributors</span> </div> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/en_US/v5/config/service.html" class="prev">
        Service
      </a></span> <span class="next"><a href="/en_US/v5/config/router.html">
        Router
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.88b09124.js" defer></script><script src="/assets/js/3.21417aa6.js" defer></script><script src="/assets/js/6.86334a57.js" defer></script><script src="/assets/js/86.feb51964.js" defer></script>
  </body>
</html>
