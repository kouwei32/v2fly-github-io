<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Multiple configuration files | V2Fly.org</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="apple-touch-icon" size="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" size="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" size="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" color="#5bbad5" href="/safari-pinned-tab.svg">
    <meta name="description" content="Project V is a collection of tools that can help you build your own basic communication network">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta name="apple-mobile-web-app-title" content="Project V">
    <meta name="application-name" content="Project V">
    <meta name="msapplication-TileColor" content="#da532c">
    
    <link rel="preload" href="/assets/css/0.styles.6daf0246.css" as="style"><link rel="preload" href="/assets/js/app.4ce729e9.js" as="script"><link rel="preload" href="/assets/js/3.c14aff60.js" as="script"><link rel="preload" href="/assets/js/6.7df7f33f.js" as="script"><link rel="preload" href="/assets/js/60.f4f49ffd.js" as="script"><link rel="prefetch" href="/assets/js/10.3dee872a.js"><link rel="prefetch" href="/assets/js/100.12364c2f.js"><link rel="prefetch" href="/assets/js/101.e0f83d94.js"><link rel="prefetch" href="/assets/js/102.53cc7f06.js"><link rel="prefetch" href="/assets/js/103.c9bcd880.js"><link rel="prefetch" href="/assets/js/104.c16097bf.js"><link rel="prefetch" href="/assets/js/105.b14cfed4.js"><link rel="prefetch" href="/assets/js/106.ccaad469.js"><link rel="prefetch" href="/assets/js/107.67ce12aa.js"><link rel="prefetch" href="/assets/js/108.e2f84489.js"><link rel="prefetch" href="/assets/js/109.6dca1eee.js"><link rel="prefetch" href="/assets/js/11.2126d095.js"><link rel="prefetch" href="/assets/js/110.25570c3d.js"><link rel="prefetch" href="/assets/js/111.137e83a4.js"><link rel="prefetch" href="/assets/js/112.9cf4035f.js"><link rel="prefetch" href="/assets/js/113.897d2725.js"><link rel="prefetch" href="/assets/js/114.0febebf7.js"><link rel="prefetch" href="/assets/js/115.951dbe8f.js"><link rel="prefetch" href="/assets/js/116.2d4b64ca.js"><link rel="prefetch" href="/assets/js/117.ee9888bf.js"><link rel="prefetch" href="/assets/js/118.46544a11.js"><link rel="prefetch" href="/assets/js/119.b7a15dd7.js"><link rel="prefetch" href="/assets/js/12.30e64442.js"><link rel="prefetch" href="/assets/js/120.0575cd0d.js"><link rel="prefetch" href="/assets/js/121.c074aa73.js"><link rel="prefetch" href="/assets/js/122.f256ae26.js"><link rel="prefetch" href="/assets/js/123.1f265ae8.js"><link rel="prefetch" href="/assets/js/124.04bfb6ab.js"><link rel="prefetch" href="/assets/js/125.63ce0472.js"><link rel="prefetch" href="/assets/js/126.8c418173.js"><link rel="prefetch" href="/assets/js/127.b50ae466.js"><link rel="prefetch" href="/assets/js/128.eb82c721.js"><link rel="prefetch" href="/assets/js/129.a80d9bcf.js"><link rel="prefetch" href="/assets/js/13.79606639.js"><link rel="prefetch" href="/assets/js/130.6eaf26d8.js"><link rel="prefetch" href="/assets/js/131.90db9b2e.js"><link rel="prefetch" href="/assets/js/132.7cbf30e3.js"><link rel="prefetch" href="/assets/js/133.5f390759.js"><link rel="prefetch" href="/assets/js/134.fa4a586f.js"><link rel="prefetch" href="/assets/js/135.1fa43b4d.js"><link rel="prefetch" href="/assets/js/136.159646f3.js"><link rel="prefetch" href="/assets/js/137.5999c574.js"><link rel="prefetch" href="/assets/js/138.140dd461.js"><link rel="prefetch" href="/assets/js/139.c4c6054d.js"><link rel="prefetch" href="/assets/js/14.eff0607d.js"><link rel="prefetch" href="/assets/js/140.a70571fb.js"><link rel="prefetch" href="/assets/js/141.ffd7eb80.js"><link rel="prefetch" href="/assets/js/142.1df63b7e.js"><link rel="prefetch" href="/assets/js/143.524cbb12.js"><link rel="prefetch" href="/assets/js/144.24839eae.js"><link rel="prefetch" href="/assets/js/145.51de7bbe.js"><link rel="prefetch" href="/assets/js/146.10265937.js"><link rel="prefetch" href="/assets/js/147.87e67a5b.js"><link rel="prefetch" href="/assets/js/148.43824fb1.js"><link rel="prefetch" href="/assets/js/149.80004c71.js"><link rel="prefetch" href="/assets/js/15.1cb50e47.js"><link rel="prefetch" href="/assets/js/150.81912794.js"><link rel="prefetch" href="/assets/js/151.610167c2.js"><link rel="prefetch" href="/assets/js/152.313bbc23.js"><link rel="prefetch" href="/assets/js/16.b9d5fc78.js"><link rel="prefetch" href="/assets/js/17.478abaa2.js"><link rel="prefetch" href="/assets/js/18.0d22a60a.js"><link rel="prefetch" href="/assets/js/19.dd9ae4e0.js"><link rel="prefetch" href="/assets/js/20.e538cabf.js"><link rel="prefetch" href="/assets/js/21.87433c02.js"><link rel="prefetch" href="/assets/js/22.1fb67cd1.js"><link rel="prefetch" href="/assets/js/23.e23e2280.js"><link rel="prefetch" href="/assets/js/24.6ea939dc.js"><link rel="prefetch" href="/assets/js/25.d7b4b654.js"><link rel="prefetch" href="/assets/js/26.f3987393.js"><link rel="prefetch" href="/assets/js/27.00086a63.js"><link rel="prefetch" href="/assets/js/28.d5ed0d5c.js"><link rel="prefetch" href="/assets/js/29.c3772ad7.js"><link rel="prefetch" href="/assets/js/30.02545fc3.js"><link rel="prefetch" href="/assets/js/31.74c44a45.js"><link rel="prefetch" href="/assets/js/32.38f5346d.js"><link rel="prefetch" href="/assets/js/33.21c22120.js"><link rel="prefetch" href="/assets/js/34.3271100c.js"><link rel="prefetch" href="/assets/js/35.8d288f88.js"><link rel="prefetch" href="/assets/js/36.8ac8e9da.js"><link rel="prefetch" href="/assets/js/37.0abec68a.js"><link rel="prefetch" href="/assets/js/38.28c93b40.js"><link rel="prefetch" href="/assets/js/39.738da38b.js"><link rel="prefetch" href="/assets/js/4.4f1d68ce.js"><link rel="prefetch" href="/assets/js/40.3724e944.js"><link rel="prefetch" href="/assets/js/41.a6e8a8fb.js"><link rel="prefetch" href="/assets/js/42.28f5bf7f.js"><link rel="prefetch" href="/assets/js/43.0be4aa0a.js"><link rel="prefetch" href="/assets/js/44.6e44dcf3.js"><link rel="prefetch" href="/assets/js/45.1b04c7d7.js"><link rel="prefetch" href="/assets/js/46.3789f929.js"><link rel="prefetch" href="/assets/js/47.3e5bbfb5.js"><link rel="prefetch" href="/assets/js/48.ec4e8fb7.js"><link rel="prefetch" href="/assets/js/49.b301f41b.js"><link rel="prefetch" href="/assets/js/5.c2b80783.js"><link rel="prefetch" href="/assets/js/50.a2c0e24f.js"><link rel="prefetch" href="/assets/js/51.f1ceec7d.js"><link rel="prefetch" href="/assets/js/52.9f1b657e.js"><link rel="prefetch" href="/assets/js/53.b6f9d487.js"><link rel="prefetch" href="/assets/js/54.0852f33c.js"><link rel="prefetch" href="/assets/js/55.d7bcbf31.js"><link rel="prefetch" href="/assets/js/56.0b1d0937.js"><link rel="prefetch" href="/assets/js/57.98c7689c.js"><link rel="prefetch" href="/assets/js/58.b9c57625.js"><link rel="prefetch" href="/assets/js/59.24431ae1.js"><link rel="prefetch" href="/assets/js/61.b3f9d421.js"><link rel="prefetch" href="/assets/js/62.ca0b298a.js"><link rel="prefetch" href="/assets/js/63.cd8354b5.js"><link rel="prefetch" href="/assets/js/64.19b2d9ef.js"><link rel="prefetch" href="/assets/js/65.99c1cda8.js"><link rel="prefetch" href="/assets/js/66.3cb69f84.js"><link rel="prefetch" href="/assets/js/67.fe813716.js"><link rel="prefetch" href="/assets/js/68.36a71189.js"><link rel="prefetch" href="/assets/js/69.21784492.js"><link rel="prefetch" href="/assets/js/7.c1f444f6.js"><link rel="prefetch" href="/assets/js/70.0f096208.js"><link rel="prefetch" href="/assets/js/71.6025d8f0.js"><link rel="prefetch" href="/assets/js/72.570b66e5.js"><link rel="prefetch" href="/assets/js/73.2f2db39d.js"><link rel="prefetch" href="/assets/js/74.906dc751.js"><link rel="prefetch" href="/assets/js/75.4d53b263.js"><link rel="prefetch" href="/assets/js/76.5928181f.js"><link rel="prefetch" href="/assets/js/77.6e1fd992.js"><link rel="prefetch" href="/assets/js/78.45b0898e.js"><link rel="prefetch" href="/assets/js/79.2ad6cf06.js"><link rel="prefetch" href="/assets/js/8.9b5cbdc4.js"><link rel="prefetch" href="/assets/js/80.0ed38f39.js"><link rel="prefetch" href="/assets/js/81.a2a2ab96.js"><link rel="prefetch" href="/assets/js/82.7e450e95.js"><link rel="prefetch" href="/assets/js/83.5ef5d9d6.js"><link rel="prefetch" href="/assets/js/84.77bba563.js"><link rel="prefetch" href="/assets/js/85.2da3bb6f.js"><link rel="prefetch" href="/assets/js/86.029c6021.js"><link rel="prefetch" href="/assets/js/87.ac6d00bc.js"><link rel="prefetch" href="/assets/js/88.786bc618.js"><link rel="prefetch" href="/assets/js/89.7c3982cd.js"><link rel="prefetch" href="/assets/js/9.c20fb338.js"><link rel="prefetch" href="/assets/js/90.d79b73d4.js"><link rel="prefetch" href="/assets/js/91.a62af01f.js"><link rel="prefetch" href="/assets/js/92.4000d7e5.js"><link rel="prefetch" href="/assets/js/93.882a872f.js"><link rel="prefetch" href="/assets/js/94.61939fd2.js"><link rel="prefetch" href="/assets/js/95.e7861eea.js"><link rel="prefetch" href="/assets/js/96.c7a1a74d.js"><link rel="prefetch" href="/assets/js/97.af57609d.js"><link rel="prefetch" href="/assets/js/98.bead0fd0.js"><link rel="prefetch" href="/assets/js/99.aefd0c71.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.f103f594.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6daf0246.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/en_US/" class="home-link router-link-active"><img src="/v2ray.png" alt="V2Fly.org" class="logo"> <span class="site-name can-hide">V2Fly.org</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/en_US/guide/start.html" class="nav-link">
  Quick Start
</a></div><div class="nav-item"><a href="/en_US/v5/config/overview.html" class="nav-link">
  Config Reference
</a></div><div class="nav-item"><a href="/en_US/awesome/tools.html" class="nav-link">
  Tools
</a></div><div class="nav-item"><a href="/en_US/developer/intro/compile.html" class="nav-link">
  Developer Guide
</a></div><div class="nav-item"><a href="https://guide.v2fly.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  New concise guide
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="选择语言" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="选择语言" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/config/multiple_config.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/en_US/config/multiple_config.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <a href="https://github.com/v2fly" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/en_US/guide/start.html" class="nav-link">
  Quick Start
</a></div><div class="nav-item"><a href="/en_US/v5/config/overview.html" class="nav-link">
  Config Reference
</a></div><div class="nav-item"><a href="/en_US/awesome/tools.html" class="nav-link">
  Tools
</a></div><div class="nav-item"><a href="/en_US/developer/intro/compile.html" class="nav-link">
  Developer Guide
</a></div><div class="nav-item"><a href="https://guide.v2fly.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  New concise guide
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="选择语言" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="选择语言" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/config/multiple_config.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/en_US/config/multiple_config.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <a href="https://github.com/v2fly" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Config Reference</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en_US/config/overview.html" class="sidebar-link">Configuration File Format</a></li><li><a href="/en_US/config/dns.html" class="sidebar-link">DNS Server</a></li><li><a href="/en_US/config/outbounds.html" class="sidebar-link">Outbounds</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Protocols</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en_US/config/protocols/blackhole.html" class="sidebar-link">Blackhole</a></li><li><a href="/en_US/config/protocols/dns.html" class="sidebar-link">DNS</a></li><li><a href="/en_US/config/protocols/dokodemo.html" class="sidebar-link">Dokodemo-door</a></li><li><a href="/en_US/config/protocols/freedom.html" class="sidebar-link">Freedom</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Transport</span> <!----></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="multiple-configuration-files"><a href="#multiple-configuration-files" class="header-anchor">#</a> Multiple configuration files</h1> <p>Starting from v4.23.0, V2Ray supports loading multiple configuration files.</p> <p>The main purpose of utilizing multiple configuration files is to distribute the configuration of many different isolated modules for easier management and maintenance. This function is primarily designed to enrich the V2Ray ecosystem, such as for GUI interfaces, which generally only implement fixed functions such as inbound/outbound selection, and may have trouble interpreting and/or generating complex configurations. Now, only one <code>confdir</code> custom configuration directory is required to configure complex functions; for server deployment scripts, just add additional configurations to the <code>confdir</code> to configure many different protocols and modules with ease.</p> <h2 id="example-multiple-startup-configurations"><a href="#example-multiple-startup-configurations" class="header-anchor">#</a> Example: Multiple startup configurations</h2> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>The startup information will prompt for each configuration file read in turn, pay attention to whether the startup information is in the order you preset.</p></div> <p><code>$ v2ray -c v2ray.json -c 00_base.json -c 01_info.json -c 02_log.json -c outbound.json</code></p> <div class="language- extra-class"><pre class="language-text"><code>V2Ray v4.23.0-version (user) 20200311-000000 (go1.13.8 linux/mipsle)
A unified platform for anti-censorship.
2020/03/22 18:40:00 [Info] v2ray.com/core/common/platform/ctlcmd: &lt;v2ctl message&gt;
v2ctl&gt; Read config:  00_base.json
v2ctl&gt; Read config:  01_info.json
v2ctl&gt; Read config:  02_log.json
v2ctl&gt; Read config:  outbound.json
v2ctl&gt; [ outbound.json ] updated outbound with tag:  proxy
</code></pre></div><h2 id="usage"><a href="#usage" class="header-anchor">#</a> Usage</h2> <p>The command line argument <code>-c</code> or <code>-config</code> can be specified multiple times.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>v2ray -config base.json -config cf1.json -c cf2.json -c cf3.json
</code></pre></div><p>Alternatively, the <code>-confdir</code> parameter can specify a directory, from which V2Ray will read <code>.json</code> configuration files in the specified directory, in order of filenames.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>v2ray -confdir /etc/v2ray/confs
</code></pre></div><p>Both can be used simultaneously. (<code>-c</code> and <code>-config</code> configurations will always be loaded before <code>-confdir</code> configurations.)</p> <div class="language-bash extra-class"><pre class="language-bash"><code>v2ray -c cf1.json -c cf2.json -confdir /etc/v2ray/confs
</code></pre></div><p>You can also use the [environment variables](env.md#Directory for multiple configurations) <code>v2ray.location.confdir</code>, or <code>V2RAY_LOCATION_CONFDIR</code> to specify <code>confdir</code>. (The <code>-confdir</code> parameter takes precedence over the environment variable; if it specifies a valid directory, the path in the environment variable is not read.)</p> <h2 id="parameters"><a href="#parameters" class="header-anchor">#</a> Parameters</h2> <h4 id="objects"><a href="#objects" class="header-anchor">#</a> Objects (<code>{}</code>)</h4> <p><strong>For all objects nested within the top-level object of the JSON configuration, parameters loaded first will be either superseded or supplemented (depending on type) by parameters loaded after it.</strong></p> <p>Example:</p> <ul><li>base.json</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;log&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;api&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;dns&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;stats&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;policy&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;transport&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;routing&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;inbounds&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>outbounds.json</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;outbounds&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Start V2Ray with both configurations:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>v2ray -c base.json -c outbounds.json
</code></pre></div><p>These two configuration files are equivalent to a single merged configuration file. When you need to modify the outbound node, you only need to modify the content of <code>outbounds.json</code>.</p> <p>As an additional example, if you need to change the log level specified by <code>log</code>, you don't need to modify <code>base.json</code>, you only need to add an additional configuration to be loaded last:</p> <ul><li>debuglog.json</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;log&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;loglevel&quot;</span><span class="token operator">:</span> <span class="token string">&quot;debug&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Start V2Ray while placing it after <code>base.json</code>:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>v2ray -c base.json -c outbounds.json -c debuglog.json
</code></pre></div><h4 id="arrays"><a href="#arrays" class="header-anchor">#</a> Arrays (<code>[]</code>)</h4> <p>In the JSON configuration, the parameters <code>inbounds</code> and <code>outbounds</code> are array structures. These array specifically have special rules during merging:</p> <ul><li>If more than one of each is present, the very last array supersedes all other previous arrays.</li> <li>If there is only one present, V2Ray first attempts to find any existing configurations specified in the with the same <code>tag</code> to override by order (as specified before). Then:
<ul><li>For inbound elements, appends it to the end of all inbounds (order is irrelevant)</li> <li>For outbound elements, prepends it to the front of all outbounds (the first outbound is the preferred one in case of conflict); but if the filename contains <code>tail</code> (case insensitive), appends it to the end.</li></ul></li></ul> <p>With multiple configurations, you can easily add inbound of different protocols to the original configuration file without modifying it directly.</p> <p>The following example is not a valid configuration, but only an example to demonstrate those rules:</p> <ul><li>000.json</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;inbounds&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;protocol&quot;</span><span class="token operator">:</span> <span class="token string">&quot;socks&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;tag&quot;</span><span class="token operator">:</span><span class="token string">&quot;socks&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;port&quot;</span><span class="token operator">:</span> <span class="token number">1234</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>001.json</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;inbounds&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;protocol&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;tag&quot;</span><span class="token operator">:</span><span class="token string">&quot;http&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>002.json</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;inbounds&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;protocol&quot;</span><span class="token operator">:</span> <span class="token string">&quot;socks&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;tag&quot;</span><span class="token operator">:</span><span class="token string">&quot;socks&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;port&quot;</span><span class="token operator">:</span> <span class="token number">4321</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The three configurations will be merged into:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;inbounds&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;protocol&quot;</span><span class="token operator">:</span> <span class="token string">&quot;socks&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;tag&quot;</span><span class="token operator">:</span><span class="token string">&quot;socks&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;port&quot;</span><span class="token operator">:</span> <span class="token number">4321</span> <span class="token comment">// &lt;--- 002 is loaded after 000, thus the port of the duplicate &quot;socks&quot; configuration is overwritten as &quot;4321&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;protocol&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;tag&quot;</span><span class="token operator">:</span><span class="token string">&quot;http&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="recommended-multi-config-list"><a href="#recommended-multi-config-list" class="header-anchor">#</a> Recommended multi-config list</h2> <p>Execute:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">for</span> <span class="token for-or-select variable">BASE</span> <span class="token keyword">in</span> 00_log 01_api 02_dns 03_routing 04_policy 05_inbounds 06_outbounds 07_transport 08_stats 09_reverse<span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token builtin class-name">echo</span> <span class="token string">'{}'</span> <span class="token operator">&gt;</span> <span class="token string">&quot;/etc/v2ray/<span class="token variable">$BASE</span>.json&quot;</span><span class="token punctuation">;</span> <span class="token keyword">done</span>
</code></pre></div><p>Or,</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">for</span> <span class="token for-or-select variable">BASE</span> <span class="token keyword">in</span> 00_log 01_api 02_dns 03_routing 04_policy 05_inbounds 06_outbounds 07_transport 08_stats 09_reverse<span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token builtin class-name">echo</span> <span class="token string">'{}'</span> <span class="token operator">&gt;</span> <span class="token string">&quot;/usr/local/etc/v2ray/<span class="token variable">$BASE</span>.json&quot;</span><span class="token punctuation">;</span> <span class="token keyword">done</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">.</span>
├── 00_log.json
├── 01_api.json
├── 02_dns.json
├── 03_routing.json
├── 04_policy.json
├── 05_inbounds.json
├── 06_outbounds.json
├── 07_transport.json
├── 08_stats.json
└── 09_reverse.json

<span class="token number">0</span> directories, <span class="token number">10</span> files
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/v2fly/v2fly-github-io/edit/master/docs/en_US/config/multiple_config.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/15/2022, 8:25:54 PM</span></div></footer> <div class="contributors" style="display:none;" data-v-6000aab7><span data-v-6000aab7>Contributors</span> </div> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.4ce729e9.js" defer></script><script src="/assets/js/3.c14aff60.js" defer></script><script src="/assets/js/6.7df7f33f.js" defer></script><script src="/assets/js/60.f4f49ffd.js" defer></script>
  </body>
</html>
