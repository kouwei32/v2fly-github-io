<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.51">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="apple-touch-icon" size="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" size="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" size="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/site.webmanifest"><link rel="mask-icon" color="#5bbad5" href="/safari-pinned-tab.svg"><meta name="viewport" content="width=device-width,initial-scale=1.0"><meta name="apple-mobile-web-app-title" content="Project V"><meta name="application-name" content="Project V"><meta name="msapplication-TileColor" content="#da532c"><title>VMess protocol | V2Fly.org</title><meta name="description" content="Project V is a collection of tools that can help you build your own basic communication network">
    <link rel="modulepreload" href="/assets/app.1e1d5899.js"><link rel="modulepreload" href="/assets/vmess.html.defba1b1.js"><link rel="modulepreload" href="/assets/vmess.html.ce34c2bb.js"><link rel="prefetch" href="/assets/index.html.5a303970.js"><link rel="prefetch" href="/assets/tools.html.0fb4eb42.js"><link rel="prefetch" href="/assets/api.html.6056bbf3.js"><link rel="prefetch" href="/assets/browserforwarder.html.1a96e7ff.js"><link rel="prefetch" href="/assets/dns.html.59e70a35.js"><link rel="prefetch" href="/assets/env.html.b7e70cf6.js"><link rel="prefetch" href="/assets/fakedns.html.3862a780.js"><link rel="prefetch" href="/assets/inbounds.html.b6a06163.js"><link rel="prefetch" href="/assets/multiple_config.html.55ef5ed8.js"><link rel="prefetch" href="/assets/observatory.html.7cafaac5.js"><link rel="prefetch" href="/assets/outbounds.html.e6d3a5b0.js"><link rel="prefetch" href="/assets/overview.html.89fa5f81.js"><link rel="prefetch" href="/assets/policy.html.9ed30abe.js"><link rel="prefetch" href="/assets/reverse.html.7c3ef35c.js"><link rel="prefetch" href="/assets/routing.html.c71dd0b9.js"><link rel="prefetch" href="/assets/stats.html.7ddff95f.js"><link rel="prefetch" href="/assets/transport.html.aa5f760b.js"><link rel="prefetch" href="/assets/index.html.48356ae6.js"><link rel="prefetch" href="/assets/command.html.3586007f.js"><link rel="prefetch" href="/assets/faq.html.59a8a037.js"><link rel="prefetch" href="/assets/help.html.1a629939.js"><link rel="prefetch" href="/assets/install.html.1eb9a5a9.js"><link rel="prefetch" href="/assets/start.html.261a5fe5.js"><link rel="prefetch" href="/assets/workflow.html.e5e8f4b3.js"><link rel="prefetch" href="/assets/blackhole.html.59d479aa.js"><link rel="prefetch" href="/assets/dns.html.7a843964.js"><link rel="prefetch" href="/assets/dokodemo.html.81df66b3.js"><link rel="prefetch" href="/assets/freedom.html.882b320e.js"><link rel="prefetch" href="/assets/http.html.72e9bed8.js"><link rel="prefetch" href="/assets/loopback.html.1cba2549.js"><link rel="prefetch" href="/assets/shadowsocks.html.d144658b.js"><link rel="prefetch" href="/assets/socks.html.2ac587ae.js"><link rel="prefetch" href="/assets/trojan.html.59d9dfd6.js"><link rel="prefetch" href="/assets/vless.html.909a9131.js"><link rel="prefetch" href="/assets/vmess.html.9f4eae95.js"><link rel="prefetch" href="/assets/domainsocket.html.7c05bdc9.js"><link rel="prefetch" href="/assets/grpc.html.071b1521.js"><link rel="prefetch" href="/assets/h2.html.3071271c.js"><link rel="prefetch" href="/assets/mkcp.html.5028eb04.js"><link rel="prefetch" href="/assets/quic.html.1b3c647f.js"><link rel="prefetch" href="/assets/tcp.html.d42d8b55.js"><link rel="prefetch" href="/assets/websocket.html.c201d2ba.js"><link rel="prefetch" href="/assets/compile.html.479113fc.js"><link rel="prefetch" href="/assets/design.html.b84ae773.js"><link rel="prefetch" href="/assets/guide.html.72f2e66d.js"><link rel="prefetch" href="/assets/mkcp.html.377f3f02.js"><link rel="prefetch" href="/assets/muxcool.html.023ae905.js"><link rel="prefetch" href="/assets/vmess.html.94a3c096.js"><link rel="prefetch" href="/assets/tools.html.c3090e53.js"><link rel="prefetch" href="/assets/api.html.3830e788.js"><link rel="prefetch" href="/assets/browserforwarder.html.58d55288.js"><link rel="prefetch" href="/assets/dns.html.c6654038.js"><link rel="prefetch" href="/assets/env.html.199e542d.js"><link rel="prefetch" href="/assets/fakedns.html.18ffe163.js"><link rel="prefetch" href="/assets/inbounds.html.dbbd04fc.js"><link rel="prefetch" href="/assets/multiple_config.html.2e2cafb2.js"><link rel="prefetch" href="/assets/observatory.html.16ceeea8.js"><link rel="prefetch" href="/assets/outbounds.html.f2960b10.js"><link rel="prefetch" href="/assets/overview.html.a598747f.js"><link rel="prefetch" href="/assets/policy.html.cc761803.js"><link rel="prefetch" href="/assets/reverse.html.0dd6350e.js"><link rel="prefetch" href="/assets/routing.html.7cf0aed5.js"><link rel="prefetch" href="/assets/stats.html.fd7181f7.js"><link rel="prefetch" href="/assets/transport.html.9e127b5d.js"><link rel="prefetch" href="/assets/faq.html.ee9b9f52.js"><link rel="prefetch" href="/assets/install.html.654f2a7c.js"><link rel="prefetch" href="/assets/start.html.b24b27f4.js"><link rel="prefetch" href="/assets/workflow.html.97642bcf.js"><link rel="prefetch" href="/assets/dns.html.dcb6cd57.js"><link rel="prefetch" href="/assets/geo.html.21ce3109.js"><link rel="prefetch" href="/assets/inbound.html.d090a21c.js"><link rel="prefetch" href="/assets/outbound.html.b6702aa6.js"><link rel="prefetch" href="/assets/overview.html.a4992b9d.js"><link rel="prefetch" href="/assets/proxy.html.2e092447.js"><link rel="prefetch" href="/assets/router.html.380a6902.js"><link rel="prefetch" href="/assets/service.html.79de1c19.js"><link rel="prefetch" href="/assets/stream.html.cd63ed51.js"><link rel="prefetch" href="/assets/blackhole.html.7b66d64e.js"><link rel="prefetch" href="/assets/dns.html.eb990643.js"><link rel="prefetch" href="/assets/dokodemo.html.a6dc7153.js"><link rel="prefetch" href="/assets/freedom.html.14f58cc1.js"><link rel="prefetch" href="/assets/http.html.092216bf.js"><link rel="prefetch" href="/assets/loopback.html.2a62d166.js"><link rel="prefetch" href="/assets/shadowsocks.html.c04528b9.js"><link rel="prefetch" href="/assets/socks.html.4474eff0.js"><link rel="prefetch" href="/assets/trojan.html.52271981.js"><link rel="prefetch" href="/assets/vless.html.78efaeec.js"><link rel="prefetch" href="/assets/vmess.html.a36e5853.js"><link rel="prefetch" href="/assets/domainsocket.html.559b4608.js"><link rel="prefetch" href="/assets/grpc.html.ed062dc1.js"><link rel="prefetch" href="/assets/h2.html.a75e81e0.js"><link rel="prefetch" href="/assets/mkcp.html.c6f9f052.js"><link rel="prefetch" href="/assets/quic.html.2a426723.js"><link rel="prefetch" href="/assets/tcp.html.6ee0d011.js"><link rel="prefetch" href="/assets/websocket.html.02c218c4.js"><link rel="prefetch" href="/assets/compile.html.401c2e28.js"><link rel="prefetch" href="/assets/design.html.ba2595e7.js"><link rel="prefetch" href="/assets/guide.html.a33a8a5b.js"><link rel="prefetch" href="/assets/mkcp.html.dcd43793.js"><link rel="prefetch" href="/assets/dns.html.9ae57811.js"><link rel="prefetch" href="/assets/geo.html.b7d62d3b.js"><link rel="prefetch" href="/assets/inbound.html.2a3dcfde.js"><link rel="prefetch" href="/assets/outbound.html.857da111.js"><link rel="prefetch" href="/assets/overview.html.90d45ea2.js"><link rel="prefetch" href="/assets/proxy.html.88343bf9.js"><link rel="prefetch" href="/assets/router.html.2f7a207c.js"><link rel="prefetch" href="/assets/service.html.3e07567e.js"><link rel="prefetch" href="/assets/stream.html.445d237d.js"><link rel="prefetch" href="/assets/blackhole.html.ffcc3b3a.js"><link rel="prefetch" href="/assets/dns.html.9004fe9f.js"><link rel="prefetch" href="/assets/dokodemo.html.87386334.js"><link rel="prefetch" href="/assets/freedom.html.0c734317.js"><link rel="prefetch" href="/assets/http.html.22784859.js"><link rel="prefetch" href="/assets/loopback.html.d75bc410.js"><link rel="prefetch" href="/assets/shadowsocks.html.05acf332.js"><link rel="prefetch" href="/assets/socks.html.d6fc1dfb.js"><link rel="prefetch" href="/assets/trojan.html.bda586b0.js"><link rel="prefetch" href="/assets/vless.html.7494fa0f.js"><link rel="prefetch" href="/assets/vlite.html.2481c7cd.js"><link rel="prefetch" href="/assets/vmess.html.27fc14fa.js"><link rel="prefetch" href="/assets/backgroundObservatory.html.613768fd.js"><link rel="prefetch" href="/assets/browser.html.d9c9db4a.js"><link rel="prefetch" href="/assets/burstObservatory.html.718ae2c8.js"><link rel="prefetch" href="/assets/policy.html.f4dbefe0.js"><link rel="prefetch" href="/assets/stats.html.e262e053.js"><link rel="prefetch" href="/assets/grpc.html.256c24b3.js"><link rel="prefetch" href="/assets/kcp.html.a3bc1ce7.js"><link rel="prefetch" href="/assets/tcp.html.5f7e7ba6.js"><link rel="prefetch" href="/assets/websocket.html.246efee3.js"><link rel="prefetch" href="/assets/blackhole.html.724a2cad.js"><link rel="prefetch" href="/assets/dns.html.a882b1a1.js"><link rel="prefetch" href="/assets/dokodemo.html.8a58328a.js"><link rel="prefetch" href="/assets/freedom.html.f8566ed2.js"><link rel="prefetch" href="/assets/http.html.7477d3d1.js"><link rel="prefetch" href="/assets/loopback.html.ff337a4f.js"><link rel="prefetch" href="/assets/shadowsocks.html.66d40aa1.js"><link rel="prefetch" href="/assets/socks.html.fec3c4d9.js"><link rel="prefetch" href="/assets/trojan.html.bf9fe0e3.js"><link rel="prefetch" href="/assets/vless.html.c7b5fb5a.js"><link rel="prefetch" href="/assets/vlite.html.1cfb83d6.js"><link rel="prefetch" href="/assets/vmess.html.3279b3bc.js"><link rel="prefetch" href="/assets/backgroundObservatory.html.050b62fb.js"><link rel="prefetch" href="/assets/browser.html.22e54f34.js"><link rel="prefetch" href="/assets/burstObservatory.html.217bab9f.js"><link rel="prefetch" href="/assets/policy.html.04da7ead.js"><link rel="prefetch" href="/assets/stats.html.2f39b4a2.js"><link rel="prefetch" href="/assets/kcp.html.4fe83651.js"><link rel="prefetch" href="/assets/quic.html.096d7801.js"><link rel="prefetch" href="/assets/tcp.html.25ae95ad.js"><link rel="prefetch" href="/assets/websocket.html.edf87fb4.js"><link rel="prefetch" href="/assets/404.html.c3e557d0.js"><link rel="prefetch" href="/assets/index.html.04a64f2f.js"><link rel="prefetch" href="/assets/tools.html.85c85b23.js"><link rel="prefetch" href="/assets/api.html.6d9851f7.js"><link rel="prefetch" href="/assets/browserforwarder.html.eb86851e.js"><link rel="prefetch" href="/assets/dns.html.6c6e4e9e.js"><link rel="prefetch" href="/assets/env.html.47040316.js"><link rel="prefetch" href="/assets/fakedns.html.989f5c08.js"><link rel="prefetch" href="/assets/inbounds.html.87957998.js"><link rel="prefetch" href="/assets/multiple_config.html.04c9d31c.js"><link rel="prefetch" href="/assets/observatory.html.9a44abbe.js"><link rel="prefetch" href="/assets/outbounds.html.9a2b447d.js"><link rel="prefetch" href="/assets/overview.html.c929272d.js"><link rel="prefetch" href="/assets/policy.html.679ab954.js"><link rel="prefetch" href="/assets/reverse.html.f3c510d2.js"><link rel="prefetch" href="/assets/routing.html.011adf6b.js"><link rel="prefetch" href="/assets/stats.html.456ef265.js"><link rel="prefetch" href="/assets/transport.html.0d702567.js"><link rel="prefetch" href="/assets/index.html.8b84ed20.js"><link rel="prefetch" href="/assets/command.html.264a30e8.js"><link rel="prefetch" href="/assets/faq.html.820bf455.js"><link rel="prefetch" href="/assets/help.html.4271d270.js"><link rel="prefetch" href="/assets/install.html.fc1f545b.js"><link rel="prefetch" href="/assets/start.html.8ee350a0.js"><link rel="prefetch" href="/assets/workflow.html.0e701160.js"><link rel="prefetch" href="/assets/blackhole.html.0921e59f.js"><link rel="prefetch" href="/assets/dns.html.93b3b652.js"><link rel="prefetch" href="/assets/dokodemo.html.90e8ff4c.js"><link rel="prefetch" href="/assets/freedom.html.36b1a3b7.js"><link rel="prefetch" href="/assets/http.html.6178c289.js"><link rel="prefetch" href="/assets/loopback.html.6ba6d340.js"><link rel="prefetch" href="/assets/shadowsocks.html.fa316e45.js"><link rel="prefetch" href="/assets/socks.html.6ecf423e.js"><link rel="prefetch" href="/assets/trojan.html.c295c133.js"><link rel="prefetch" href="/assets/vless.html.136547f0.js"><link rel="prefetch" href="/assets/vmess.html.c10fd908.js"><link rel="prefetch" href="/assets/domainsocket.html.af01a877.js"><link rel="prefetch" href="/assets/grpc.html.7d0fa056.js"><link rel="prefetch" href="/assets/h2.html.8586c50b.js"><link rel="prefetch" href="/assets/mkcp.html.f78f8a78.js"><link rel="prefetch" href="/assets/quic.html.7313ac41.js"><link rel="prefetch" href="/assets/tcp.html.d8fe07ce.js"><link rel="prefetch" href="/assets/websocket.html.5259feaa.js"><link rel="prefetch" href="/assets/compile.html.47ebe22c.js"><link rel="prefetch" href="/assets/design.html.ca052d45.js"><link rel="prefetch" href="/assets/guide.html.4f16c91a.js"><link rel="prefetch" href="/assets/mkcp.html.3c04efd9.js"><link rel="prefetch" href="/assets/muxcool.html.041059d2.js"><link rel="prefetch" href="/assets/vmess.html.982f4c65.js"><link rel="prefetch" href="/assets/tools.html.fdd0939f.js"><link rel="prefetch" href="/assets/api.html.9197320f.js"><link rel="prefetch" href="/assets/browserforwarder.html.1122576f.js"><link rel="prefetch" href="/assets/dns.html.6883a508.js"><link rel="prefetch" href="/assets/env.html.19a2b5bb.js"><link rel="prefetch" href="/assets/fakedns.html.d3b07d8e.js"><link rel="prefetch" href="/assets/inbounds.html.2eaab65d.js"><link rel="prefetch" href="/assets/multiple_config.html.9c0087a3.js"><link rel="prefetch" href="/assets/observatory.html.44f2a148.js"><link rel="prefetch" href="/assets/outbounds.html.1c8755cd.js"><link rel="prefetch" href="/assets/overview.html.2c1091ba.js"><link rel="prefetch" href="/assets/policy.html.344e010d.js"><link rel="prefetch" href="/assets/reverse.html.d6c76c35.js"><link rel="prefetch" href="/assets/routing.html.b51f1305.js"><link rel="prefetch" href="/assets/stats.html.394b69ce.js"><link rel="prefetch" href="/assets/transport.html.7ee79ea0.js"><link rel="prefetch" href="/assets/faq.html.5409e2db.js"><link rel="prefetch" href="/assets/install.html.d2af6674.js"><link rel="prefetch" href="/assets/start.html.9da958b4.js"><link rel="prefetch" href="/assets/workflow.html.46217ad9.js"><link rel="prefetch" href="/assets/dns.html.8ef0c7f0.js"><link rel="prefetch" href="/assets/geo.html.8a75ac7d.js"><link rel="prefetch" href="/assets/inbound.html.d50b776c.js"><link rel="prefetch" href="/assets/outbound.html.ef28e23d.js"><link rel="prefetch" href="/assets/overview.html.480bfd56.js"><link rel="prefetch" href="/assets/proxy.html.e477799e.js"><link rel="prefetch" href="/assets/router.html.9fb1166c.js"><link rel="prefetch" href="/assets/service.html.4125b079.js"><link rel="prefetch" href="/assets/stream.html.789fab00.js"><link rel="prefetch" href="/assets/blackhole.html.4101cf83.js"><link rel="prefetch" href="/assets/dns.html.f6dfabc7.js"><link rel="prefetch" href="/assets/dokodemo.html.0b593022.js"><link rel="prefetch" href="/assets/freedom.html.6c0d222a.js"><link rel="prefetch" href="/assets/http.html.613c5cb8.js"><link rel="prefetch" href="/assets/loopback.html.6c020428.js"><link rel="prefetch" href="/assets/shadowsocks.html.b987c803.js"><link rel="prefetch" href="/assets/socks.html.1ed3d075.js"><link rel="prefetch" href="/assets/trojan.html.ac8f882f.js"><link rel="prefetch" href="/assets/vless.html.c8246e94.js"><link rel="prefetch" href="/assets/vmess.html.34ee40b3.js"><link rel="prefetch" href="/assets/domainsocket.html.6d1f5cb6.js"><link rel="prefetch" href="/assets/grpc.html.52bf34c1.js"><link rel="prefetch" href="/assets/h2.html.7b26ffa3.js"><link rel="prefetch" href="/assets/mkcp.html.e1012fd5.js"><link rel="prefetch" href="/assets/quic.html.eb42b77c.js"><link rel="prefetch" href="/assets/tcp.html.f292bd10.js"><link rel="prefetch" href="/assets/websocket.html.5eca2dd6.js"><link rel="prefetch" href="/assets/compile.html.099f8c8a.js"><link rel="prefetch" href="/assets/design.html.38788098.js"><link rel="prefetch" href="/assets/guide.html.93834f4c.js"><link rel="prefetch" href="/assets/mkcp.html.b68bb51e.js"><link rel="prefetch" href="/assets/dns.html.09dda15c.js"><link rel="prefetch" href="/assets/geo.html.be5ba22c.js"><link rel="prefetch" href="/assets/inbound.html.04584f50.js"><link rel="prefetch" href="/assets/outbound.html.595d04eb.js"><link rel="prefetch" href="/assets/overview.html.ab62d1f8.js"><link rel="prefetch" href="/assets/proxy.html.87afe31a.js"><link rel="prefetch" href="/assets/router.html.627dc440.js"><link rel="prefetch" href="/assets/service.html.a49331ae.js"><link rel="prefetch" href="/assets/stream.html.2f2892a3.js"><link rel="prefetch" href="/assets/blackhole.html.dbfd49de.js"><link rel="prefetch" href="/assets/dns.html.b5f9c5af.js"><link rel="prefetch" href="/assets/dokodemo.html.050339cd.js"><link rel="prefetch" href="/assets/freedom.html.0b43c6af.js"><link rel="prefetch" href="/assets/http.html.36583f9a.js"><link rel="prefetch" href="/assets/loopback.html.30f0e547.js"><link rel="prefetch" href="/assets/shadowsocks.html.6417aad9.js"><link rel="prefetch" href="/assets/socks.html.3dd923f3.js"><link rel="prefetch" href="/assets/trojan.html.8ad4ad23.js"><link rel="prefetch" href="/assets/vless.html.554b3cb9.js"><link rel="prefetch" href="/assets/vlite.html.4ed222b6.js"><link rel="prefetch" href="/assets/vmess.html.5941b7d2.js"><link rel="prefetch" href="/assets/backgroundObservatory.html.8cebc83a.js"><link rel="prefetch" href="/assets/browser.html.7e82c285.js"><link rel="prefetch" href="/assets/burstObservatory.html.373bbdf6.js"><link rel="prefetch" href="/assets/policy.html.40b6d894.js"><link rel="prefetch" href="/assets/stats.html.c0333689.js"><link rel="prefetch" href="/assets/grpc.html.7f893ec7.js"><link rel="prefetch" href="/assets/kcp.html.c55b29c8.js"><link rel="prefetch" href="/assets/tcp.html.47dfe0fb.js"><link rel="prefetch" href="/assets/websocket.html.b27fb775.js"><link rel="prefetch" href="/assets/blackhole.html.dda6da21.js"><link rel="prefetch" href="/assets/dns.html.e668edc7.js"><link rel="prefetch" href="/assets/dokodemo.html.3436eb7a.js"><link rel="prefetch" href="/assets/freedom.html.76cadb9f.js"><link rel="prefetch" href="/assets/http.html.56f0d382.js"><link rel="prefetch" href="/assets/loopback.html.687fe3cc.js"><link rel="prefetch" href="/assets/shadowsocks.html.5c0dbb9e.js"><link rel="prefetch" href="/assets/socks.html.45850b1c.js"><link rel="prefetch" href="/assets/trojan.html.3acc6ed6.js"><link rel="prefetch" href="/assets/vless.html.688e9d65.js"><link rel="prefetch" href="/assets/vlite.html.481ed348.js"><link rel="prefetch" href="/assets/vmess.html.efb87f89.js"><link rel="prefetch" href="/assets/backgroundObservatory.html.902601b1.js"><link rel="prefetch" href="/assets/browser.html.135f88cb.js"><link rel="prefetch" href="/assets/burstObservatory.html.402a74e7.js"><link rel="prefetch" href="/assets/policy.html.8272f6b0.js"><link rel="prefetch" href="/assets/stats.html.4ec243fb.js"><link rel="prefetch" href="/assets/kcp.html.9648f608.js"><link rel="prefetch" href="/assets/quic.html.de887c9e.js"><link rel="prefetch" href="/assets/tcp.html.05713ca3.js"><link rel="prefetch" href="/assets/websocket.html.769ff5dd.js"><link rel="prefetch" href="/assets/404.html.04a345a0.js"><link rel="prefetch" href="/assets/Tool.53140f68.js"><link rel="prefetch" href="/assets/Uuid.a4c04af3.js">
    <link rel="stylesheet" href="/assets/style.ad5697ba.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/en_US/" class=""><img class="logo" src="/v2ray.png" alt="V2Fly.org"><span class="site-name can-hide">V2Fly.org</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/en_US/guide/start" class="" aria-label="Quick Start"><!--[--><!--]--> Quick Start <!--[--><!--]--></a></div><div class="navbar-item"><a href="/en_US/v5/config/overview" class="" aria-label="Config Reference"><!--[--><!--]--> Config Reference <!--[--><!--]--></a></div><div class="navbar-item"><a href="/en_US/awesome/tools" class="" aria-label="Tools"><!--[--><!--]--> Tools <!--[--><!--]--></a></div><div class="navbar-item"><a href="/en_US/developer/intro/compile" class="" aria-label="Developer Guide"><!--[--><!--]--> Developer Guide <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://guide.v2fly.org/" rel="noopener noreferrer" target="_blank" aria-label="New concise guide"><!--[--><!--]--> New concise guide <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/developer/protocols/vmess.html" class="" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/en_US/developer/protocols/vmess.html" class="router-link-active router-link-exact-active router-link-active" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/v2fly" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/en_US/guide/start" class="" aria-label="Quick Start"><!--[--><!--]--> Quick Start <!--[--><!--]--></a></div><div class="navbar-item"><a href="/en_US/v5/config/overview" class="" aria-label="Config Reference"><!--[--><!--]--> Config Reference <!--[--><!--]--></a></div><div class="navbar-item"><a href="/en_US/awesome/tools" class="" aria-label="Tools"><!--[--><!--]--> Tools <!--[--><!--]--></a></div><div class="navbar-item"><a href="/en_US/developer/intro/compile" class="" aria-label="Developer Guide"><!--[--><!--]--> Developer Guide <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://guide.v2fly.org/" rel="noopener noreferrer" target="_blank" aria-label="New concise guide"><!--[--><!--]--> New concise guide <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/developer/protocols/vmess.html" class="" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/en_US/developer/protocols/vmess.html" class="router-link-active router-link-exact-active router-link-active" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/v2fly" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">Developer Guide <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/en_US/developer/intro/compile.html" class="sidebar-item" aria-label="The first step: learn to compile"><!--[--><!--]--> The first step: learn to compile <!--[--><!--]--></a><!----></li><li><a href="/en_US/developer/intro/design.html" class="sidebar-item" aria-label="Step 2: Understand the architecture"><!--[--><!--]--> Step 2: Understand the architecture <!--[--><!--]--></a><!----></li><li><a href="/en_US/developer/intro/guide.html" class="sidebar-item" aria-label="Step 3: Start development"><!--[--><!--]--> Step 3: Start development <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Protocol Details <!----></p><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="vmess-protocol" tabindex="-1"><a class="header-anchor" href="#vmess-protocol" aria-hidden="true">#</a> VMess protocol</h1><p>VMess is the original encrypted communication protocol of V2Ray.</p><h2 id="protocol-version" tabindex="-1"><a class="header-anchor" href="#protocol-version" aria-hidden="true">#</a> Protocol version</h2><p>The current version number is 1.</p><h2 id="principals" tabindex="-1"><a class="header-anchor" href="#principals" aria-hidden="true">#</a> Principals</h2><h3 id="transport" tabindex="-1"><a class="header-anchor" href="#transport" aria-hidden="true">#</a> Transport</h3><p>VMess is a TCP-based protocol, and all data is transferred using TCP.</p><h3 id="user-id" tabindex="-1"><a class="header-anchor" href="#user-id" aria-hidden="true">#</a> User ID</h3><p>ID is equivalent to <a href="https://en.wikipedia.org/wiki/Universally_unique_identifier" target="_blank" rel="noopener noreferrer">UUID<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>, a 16-byte long random hexadecimal string that acts as a Token. Example of a UUID: de305d54-75b4-431b-adb2-eb6b9e546014; almost fully randomized, and can be generated using any UUID generator, such as <a href="https://www.uuidgenerator.net/" target="_blank" rel="noopener noreferrer">this<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><p>The user ID can be specified in the <a href="/en_US/developer/config/overview.html" class="">configuration file</a>.</p><h3 id="functions" tabindex="-1"><a class="header-anchor" href="#functions" aria-hidden="true">#</a> Functions</h3><ul><li>MD5: <a href="https://en.wikipedia.org/wiki/MD5" target="_blank" rel="noopener noreferrer">MD5 function<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><ul><li>Input is a byte array of arbitrary length</li><li>Output is a 16 byte array</li></ul></li><li>HMAC: <a href="https://en.wikipedia.org/wiki/Hash-based_message_authentication_code" target="_blank" rel="noopener noreferrer">HMAC function<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><ul><li>Input parameters: <ul><li>H: Hash function</li><li>K: Key, arbitrary length byte array</li><li>M: Message, arbitrary length byte array</li></ul></li></ul></li><li>Shake: <a href="https://en.wikipedia.org/wiki/SHA-3" target="_blank" rel="noopener noreferrer">SHA3-Shake128 function<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><ul><li>Input is a string of arbitrary length</li><li>Output is a string of arbitrary length</li></ul></li></ul><h2 id="communication-process" tabindex="-1"><a class="header-anchor" href="#communication-process" aria-hidden="true">#</a> Communication process</h2><p>VMess is a stateless protocol. That is, the client and server do not need to handshake to directly transfer data, and each data transfer does not affect other data transfers before or after it. The VMess client initiates a request, and the server determines whether the request comes from a legitimate client. If the verification passes, the request is forwarded and the response is returned to the client. VMess uses an asymmetric format. That is, the request sent by the client and the response replied by the server use different formats.</p><h2 id="client-request" tabindex="-1"><a class="header-anchor" href="#client-request" aria-hidden="true">#</a> Client request</h2><table><thead><tr><th>16 bytes</th><th>X bytes</th><th>Remaining Payload</th></tr></thead><tbody><tr><td>Authentication</td><td>Command</td><td>Data...</td></tr></tbody></table><h3 id="authentication" tabindex="-1"><a class="header-anchor" href="#authentication" aria-hidden="true">#</a> Authentication</h3><p>The Authentication header is a 16-byte hash value, which is calculated as follows:</p><ul><li>H = MD5</li><li>K = User ID (16 bytes)</li><li>M = UTC time, accurate to seconds, the value is the current time plus or minus 30 seconds (8 bytes, Big Endian)</li><li>Hash = HMAC(H, K, M)</li></ul><h3 id="command" tabindex="-1"><a class="header-anchor" href="#command" aria-hidden="true">#</a> Command</h3><p>The Command header is encrypted by AES-128-CFB:</p><ul><li>Key: MD5(User ID + []byte(&#39;c48619fe-8f02-49e0-b9e9-edf763e17e21&#39;))</li><li>IV: MD5(X + X + X + X), X = []byte (UTC time at authentication header generation) (8 bytes, Big Endian)</li></ul><table><thead><tr><th style="text-align:center;">1 byte</th><th style="text-align:center;">16 bytes</th><th style="text-align:center;">16 bytes</th><th style="text-align:center;">1 byte</th><th style="text-align:center;">1 byte</th><th style="text-align:center;">4 bit</th><th style="text-align:center;">4 bit</th><th style="text-align:center;">1 byte</th><th style="text-align:center;">1 byte</th><th style="text-align:center;">2 bytes</th><th style="text-align:center;">1 byte</th><th style="text-align:center;">N bytes</th><th style="text-align:center;">P byte</th><th style="text-align:center;">4 bytes</th></tr></thead><tbody><tr><td style="text-align:center;">Version <code>Ver</code></td><td style="text-align:center;">Encryption <code>IV</code></td><td style="text-align:center;">Encryption <code>Key</code></td><td style="text-align:center;">Response Auth Pad <code>V</code></td><td style="text-align:center;">Options <code>Opt</code></td><td style="text-align:center;">Padding <code>P</code></td><td style="text-align:center;">Encryption Algorithm <code>Sec</code></td><td style="text-align:center;"><code>Keep</code></td><td style="text-align:center;">Command <code>Cmd</code></td><td style="text-align:center;"><code>Port</code></td><td style="text-align:center;">Address Type <code>T</code></td><td style="text-align:center;">Address <code>A</code></td><td style="text-align:center;">Random Padding</td><td style="text-align:center;">Message Checksum <code>F</code></td></tr></tbody></table><p>Option <code>Opt</code> details: (A bit set to 1 enables the option)</p><table><thead><tr><th style="text-align:center;">0</th><th style="text-align:center;">1</th><th style="text-align:center;">2</th><th style="text-align:center;">3</th><th style="text-align:center;">4</th><th style="text-align:center;">5</th><th style="text-align:center;">6</th><th style="text-align:center;">7</th></tr></thead><tbody><tr><td style="text-align:center;">X</td><td style="text-align:center;">X</td><td style="text-align:center;">X</td><td style="text-align:center;">X</td><td style="text-align:center;">X</td><td style="text-align:center;">M</td><td style="text-align:center;">R</td><td style="text-align:center;">S</td></tr></tbody></table><p>Where:</p><ul><li>Version <code>Ver</code>: Currently always <code>1</code>;</li><li>Encryption <code>IV</code>: random value;</li><li>Encryption <code>Key</code>: random value;</li><li>Response Auth Pad <code>V</code>: random value;</li><li>Options <code>Opt</code>: <ul><li>S (<code>0x01</code>): standard format data stream (recommended to open);</li><li>R (<code>0x02</code>): The client expects to reuse TCP connections (V2Ray 2.23+ deprecated);</li><li>Only valid when S is also enabled;</li><li>M (<code>0x04</code>): Enable metadata obfuscation (Recommended); <ul><li>Only valid when S is also enabled;</li><li>While enabled, the client and server need to construct two Shake instances separately: RequestMask = Shake (request data IV), and ResponseMask = Shake (response data IV).</li></ul></li><li>X: Reserved</li></ul></li><li>Padding <code>P</code>: Pad with P bytes of random data;</li><li>Encryption Algorithm <code>Sec</code>: Specify the encryption method of the data payload: <ul><li><code>0x00</code>: AES-128-CFB;</li><li><code>0x01</code>: No encryption;</li><li><code>0x02</code>: AES-128-GCM;</li><li><code>0x03</code>: ChaCha20-Poly1305;</li></ul></li><li>Command <code>Cmd</code>: <ul><li><code>0x01</code>: TCP data;</li><li><code>0x02</code>: UDP data;</li></ul></li><li><code>Port</code>: Integer destination port number in Big Endian format;</li><li>Address Type <code>T</code>: <ul><li><code>0x01</code>: IPv4</li><li><code>0x02</code>: Domain name</li><li><code>0x03</code>: IPv6</li></ul></li><li>Address <code>A</code>: <ul><li>While T = <code>0x01</code>, A is a 4-byte IPv4 address;</li><li>While T = <code>0x02</code>, A is 1-byte length parameter (L) + L-byte length domain name;</li><li>While T = <code>0x03</code>, A is a 16-byte IPv6 address;</li></ul></li><li>Message Checksum <code>F</code>: FNV1a hash of all contents except F in the Command header;</li></ul><h3 id="data-payload" tabindex="-1"><a class="header-anchor" href="#data-payload" aria-hidden="true">#</a> Data payload</h3><p>Two data formats are supported, defaulting to the Basic format:</p><h4 id="basic-format-deprecated" tabindex="-1"><a class="header-anchor" href="#basic-format-deprecated" aria-hidden="true">#</a> Basic format (Deprecated)</h4><p>**This format is included only for backward compatibility reasons and may be removed in future versions. **</p><p>All data is assumed to be the actual content of the client&#39;s request. This content will be sent to the address specified in the Command header. If <code>Cmd</code> = <code>0x01</code>, data will be sent in TCP form; If <code>Cmd</code> = <code>0x02</code>, data will be sent in UDP form.</p><p>This format supports two encryption options: &quot;unencrypted&quot; and &quot;AES-128-CFB&quot;. The encryption Key and IV are specified by the Command header.</p><h4 id="standard-format" tabindex="-1"><a class="header-anchor" href="#standard-format" aria-hidden="true">#</a> Standard Format</h4><p>When <code>Opt(S)</code> is enabled, the Data payload uses this format. The actual request data is divided into several small blocks, and the format of each block is as follows. After the server verifies the integrity of all blocks, it forwards them similarly to the basic format.</p><table><thead><tr><th style="text-align:center;">2 bytes</th><th style="text-align:center;">L bytes</th></tr></thead><tbody><tr><td style="text-align:center;">Length L</td><td style="text-align:center;">Data Packet</td></tr></tbody></table><p>Where:</p><ul><li>Length L: Big Endian integer, maximum value 2^14; <ul><li>When <code>Opt(M)</code> is enabled, L is set to <code>xor Mask.Mask = (RequestMask.NextByte() &lt;&lt; 8) + RequestMask.NextByte()</code>;</li></ul></li><li>Data Packet: Block encrypted by the specified encryption method;</li></ul><p>Before the end of transmission, there must be actual data present in the data packet. That is, data other than the length L and headers. When the transmission ends, the client shall send an empty data packet of zero length L (not encrypted), or the length of the authentication header (encrypted), to indicate the end of transmission.</p><p>Depending on the encryption method, the format of the data packet is as follows:</p><ul><li>Unencrypted: <ul><li>L bytes: Actual data payload;</li></ul></li><li>AES-128-CFB: Payload is encrypted with AES-128-CFB <ul><li>4 bytes: FNV1a hash of actual data payload (Big-Endian);</li><li>L-4 bytes: Actual data payload;</li></ul></li><li>AES-128-GCM: Key is specified in Command header, IV = count (2 bytes) + IV (10 bytes). Count starts from 0 and increases by 1 for each data packet; IV is the bytes 3 to 12 of the Command header <code>IV</code>. <ul><li>L-16 bytes: Actual data payload;</li><li>16 bytes: GCM authentication code</li></ul></li><li>ChaCha20-Poly1305: Key = MD5 (Command header <code>Key</code>) + MD5 (MD5 (Command header <code>Key</code>)), IV = count (2 bytes) + IV (10 bytes). Count starts from 0 and increases by 1 for each data packet; IV is bytes 3 to 12 of the Command header <code>IV</code>. <ul><li>L-16 bytes: Actual data payload;</li><li>16 bytes: Poly1305 authentication information</li></ul></li></ul><h2 id="server-response" tabindex="-1"><a class="header-anchor" href="#server-response" aria-hidden="true">#</a> Server response</h2><p>The header data of the response is encrypted with AES-128-CFB, where the IV is MD5 (data encryption IV), and the Key is MD5 (data encryption Key). The actual response data varies depending on the encryption settings.</p><table><thead><tr><th>1 byte</th><th>1 byte</th><th>1 byte</th><th>1 byte</th><th>M byte</th><th>Remaining Data</th></tr></thead><tbody><tr><td>Response Auth Pad <code>V</code></td><td>Options <code>Opt</code></td><td>Command <code>Cmd</code></td><td>Command Length <code>M</code></td><td>Command Payload</td><td>Actual response data payload</td></tr></tbody></table><p>Where:</p><ul><li>Response Auth Pad <code>V</code>: must be the same as the Response Auth Pad <code>V</code> in the client request;</li><li>Options <code>Opt</code>: <ul><li>0x01: The server can reuse this TCP connection (obsoleted since v2.23);</li></ul></li><li>Command <code>Cmd</code>: <ul><li>0x01: Use dynamic port (See <a href="#Dynamic-Port-Command">Dynamic Port Command</a>)</li></ul></li><li>Actual response data: <ul><li>If <code>Opt(S)</code> was enabled in the request, the standard format is used, otherwise default to the basic format.</li><li>When Opt(M) is enabled, L is set to <code>xor Mask.Mask = (ResponseMask.NextByte() &lt;&lt; 8) + ResponseMask.NextByte()</code>;</li></ul></li></ul><h3 id="dynamic-port-command" tabindex="-1"><a class="header-anchor" href="#dynamic-port-command" aria-hidden="true">#</a> Dynamic Port Command</h3><table><thead><tr><th>1 byte</th><th>2 byte</th><th>16 byte</th><th>2 byte</th><th>1 byte</th><th>1 byte</th></tr></thead><tbody><tr><td>Reserved</td><td>Port</td><td>User ID</td><td>AlterID</td><td>User level</td><td>TTL <code>T</code></td></tr></tbody></table><p>Where:</p><ul><li>Port: Big Endian integer port number;</li><li>Time-To-Live <code>T</code>: Time in minutes;</li></ul><p>If a client receives the dynamic port command, the server has opened a new dynamic port, which the client can utilize to send future data. After T minutes, this port is invalidated and the client must revert to using the main port again.</p><h2 id="notes" tabindex="-1"><a class="header-anchor" href="#notes" aria-hidden="true">#</a> Notes</h2><ul><li>To ensure backward compatibility, the values of all reserved fields must be 0.</li></ul></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/v2fly/v2fly-github-io/edit/main/docs/en_US/developer/protocols/vmess.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page on GitHub"><!--[--><!--]--> Edit this page on GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: kouwei32@foxmail.com">kouwei32</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: 43880903+transifex-integration[bot]@users.noreply.github.com">transifex-integration[bot]</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.1e1d5899.js" defer></script>
  </body>
</html>
